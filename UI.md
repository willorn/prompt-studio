### UI/UX 设计需求文档: AI 提示词（Prompt）版本管理工具

版本: 1.1
日期: 2025年11月15日

#### 1. 产品愿景与设计哲学

本应用是一款为 Prompt 工程师和 AI 从业者打造的专业级效率工具。UI 设计的核心目标是清晰、高效、无干扰，让用户能沉浸于提示词的创作与迭代，而非被复杂的操作所困扰。

我们将严格遵循 Material Design 3 (M3) 的设计原则，打造一个美观、现代化且具备高度可用性的界面。

*   设计风格: Material Design 3 (M3)
*   风格特征:
    *   富有表现力: 利用 M3 的动态色彩、圆角和阴影系统，创造一个有呼吸感、不呆板的界面。
    *   适应性强: 确保从手机小屏到宽屏显示器的无缝响应式体验。
    *   个人化: 以用户选择的主色调为基础，生成和谐的、覆盖整个应用的色彩体系。
*   主色调 (Seed Color): `rgb(207, 235, 131)`
    *   应用: 此颜色将作为种子，通过 M3 的算法生成一套完整的色彩方案（Primary, Secondary, Tertiary, Surface, Error 等及其 `On-` 和 `Container` 变体），确保整个应用的色彩和谐统一与高对比度。

#### 2. 核心布局与响应式设计

应用采用一个经典且高效的三栏式布局，并能优雅地降级适应小屏幕。

*   桌面端 ( > 1024px ):
    *   左侧边栏 (可调整宽度): 展示目录与项目的树形结构。始终可见，便于快速切换上下文。
    *   中间主画布: 核心工作区，用于可视化地展示当前项目的版本树。
    *   右侧面板 (可调整宽度): 上下文区域，默认显示当前选中版本的编辑器。当触发对比功能时，此区域切换为并排 Diff 视图。

*   平板端 ( 640px - 1024px ):
    *   左侧边栏默认为收起的图标模式，点击可展开。
    *   中间主画布和右侧面板并存，但空间会更紧凑。

*   移动端 ( < 640px ):
    *   单页视图切换: 放弃多栏布局。
    *   默认视图: 项目列表页。
    *   导航: 点击一个项目，会导航到该项目的版本树视图。点击一个版本，会导航到该版本的编辑器视图。使用明确的返回按钮或手势进行层级返回。

#### 3. 核心视图与功能模块设计

##### 3.1. 侧边栏 (目录与项目)

*   组件: 树形控件 (Tree View)。
*   设计:
    *   使用 M3 的 `List` 组件作为基础。文件夹和项目有清晰的层级缩进和展开/折叠图标 (Chevron)。
    *   当前选中的项目有明显的高亮背景（使用 `Primary Container` 或 `Secondary Container` 色）。
    *   每个项目条目右侧有一个 `...` (kebab menu) 按钮，悬停显示，点击后弹出菜单（项目设置、导出、删除）。

##### 3.2. 主画布 (版本树)

*   组件: 自定义画布，由卡片 (Card) 和连接线构成。
*   版本节点卡片:
    *   样式: 使用 M3 的 `Filled Card` 或 `Elevated Card` 风格，提供清晰的视觉边界。
    *   内容:
        *   Prompt 内容摘要（显示前 2-3 行）。
        *   底部元信息区域：创建/更新时间、版本评分（星形图标）、附件指示符（回形针图标）。
    *   交互状态:
        *   默认: 标准卡片样式。
        *   悬停 (Hover): 卡片轻微上浮（增加阴影），并显示操作按钮（如“+”创建子版本、“删除”等）。
        *   选中 (Selected): 卡片边框或背景使用主色调（`Primary` 或 `Secondary`）进行高亮，与右侧编辑器内容关联。
*   连接线: 使用 SVG 路径绘制，线条平滑圆润，颜色使用中性色（如 `Outline`），避免喧宾夺主。

##### 3.3. 右侧面板 (编辑器与 Diff)

*   编辑器:
    *   集成 CodeMirror，并为其配置一个与 M3 整体风格（特别是亮/暗模式）匹配的主题。
    *   编辑器上方是一个工具栏，包含：保存按钮、Prompt 片段库 (Snippets) 的触发按钮、版本元信息（时间、评分等）。
*   Diff 视图:
    *   使用 CodeMirror 的并排对比模式。
    *   清晰地区分增加（绿色背景）、删除（红色背景）的行。

##### 3.4. 片段库 (Snippets)

*   触发方式: 可通过编辑器工具栏的按钮触发。
*   展现形式: 可以是一个模态框 (Modal) 或从侧边滑出的抽屉 (Drawer)。
*   设计: 内部是一个可搜索的列表，每个片段条目包含名称和内容预览，右侧有插入和删除按钮。

#### 4. 原子组件设计要求

*   按钮 (Button):
    *   主要操作: 如“保存新版本”，使用 M3 的 `Filled Button`。
    *   次要操作: 如“取消”，使用 `Outlined Button` 或 `Text Button`。
    *   图标按钮: 用于工具栏等紧凑空间，如删除、添加附件，使用带 Tooltip 的 `Icon Button`。
*   模态框 (Modal / Dialog):
    *   用于需要用户确认的关键操作（如删除项目/版本）、设置（WebDAV 配置）、数据导入/导出。
    *   遵循 M3 Dialog 规范，包含标题、内容区和底部动作按钮区。
*   搜索输入 (Search Input):
    *   用于项目列表和片段库的搜索。
    *   使用 M3 的 `Text Field`，内嵌搜索图标。
*   文件上传 (File Upload):
    *   在版本卡片的附件区域，提供一个点击上传的按钮。
    *   支持拖拽文件到特定区域（如整个版本卡片或编辑器）进行上传，拖拽时有明确的视觉反馈（如虚线边框和高亮背景）。
*   图片/文件预览 (Image/File Preview):
    *   版本卡片上的附件指示符点击后，应使用模态框或灯箱 (Lightbox) 效果预览图片。
    *   非图片文件（如视频）则显示文件名和图标，点击可调用浏览器默认行为或下载。

#### 5. 交互与动效

*   状态切换: 视图之间的切换（尤其在移动端）应使用平滑的过渡动画（如 M3 的 `Material Motion`）。
*   微交互:
    *   所有按钮、列表项的点击都应有涟漪 (Ripple) 反馈。
    *   创建新版本时，新卡片节点应有一个“生长”或“淡入”的动画，连接线也应平滑绘制出来。
    *   折叠/展开侧边栏、打开模态框等都应有流畅的过渡动画。

#### 6. 可访问性 (Accessibility)

*   色彩对比度: 严格使用 M3 动态色彩生成的 `On-*` 颜色，确保文本和背景的对比度符合 WCAG 2.1 AA 标准。
*   键盘导航: 确保所有可交互元素（按钮、输入框、列表项、版本卡片）都可以通过键盘（Tab, Enter, Space, Arrow Keys）进行访问和操作。
*   屏幕阅读器: 为图标按钮等非文本元素提供明确的 `aria-label`。
*   文字大小: 使用 M3 的 `Typography` 规范，确保不同字体大小的文本在不同设备上保持一致的视觉效果。