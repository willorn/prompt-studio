### **UI/UX 设计需求文档: AI 提示词（Prompt）版本管理工具**

**版本**: 1.3
**日期**: 2025年11月15日

#### 1. 产品愿景与设计哲学

本应用是一款为 Prompt 工程师和 AI 从业者打造的专业级效率工具。UI 设计的核心目标是**清晰、高效、无干扰**，让用户能沉浸于提示词的创作与迭代，而非被复杂的操作所困扰。

我们将严格遵循 **Material Design 3 (M3)** 的设计原则，打造一个美观、现代化且具备高度可用性的界面。

*   **设计风格**: Material Design 3 (M3)
*   **风格特征**:
    *   **富有表现力**: 利用 M3 的动态色彩、圆角和阴影系统，创造一个有呼吸感、不呆板的界面。
    *   **适应性强**: 确保从手机小屏到宽屏显示器的无缝响应式体验。
    *   **个人化**: 以用户选择的主色调为基础，生成和谐的、覆盖整个应用的色彩体系。
*   **主色调 (Seed Color)**: **`rgb(207, 235, 131)`**
    *   **应用**: 此颜色将作为种子，通过 M3 的算法生成一套完整的色彩方案（Primary, Secondary, Tertiary, Surface, Error 等及其 `On-` 和 `Container` 变体），确保整个应用的色彩和谐统一与高对比度。

#### 2. 核心布局与响应式设计

应用采用一个高度灵活的三栏式布局，强调用户对工作空间的主导权。

*   **桌面端 ( > 1024px )**:
    *   **左侧边栏**: 展示**目录与项目**的树形结构。
        *   **交互**: 侧边栏可以**折叠**，也可以**展开**。默认展开。
    *   **可拖动分隔符 (Resizable Splitter)**: **中间主画布与右侧面板之间。** 用户可以拖动此分隔符，自由调整两个区域的相对宽度。
    *   **中间主画布**: 核心工作区，可视化地展示当前项目的**版本树**。
    *   **右侧面板**: 选中版本的**详情预览与编辑区**。

*   **平板端 ( 640px - 1024px )**:
    *   左侧边栏默认为折叠的 mini 模式，点击可展开。
    *   保留可拖动的分隔符，但设定最小/最大宽度限制，防止布局崩溃。

*   **移动端 ( < 640px )**:
    *   **单页视图切换**: 放弃多栏布局。
    *   **默认视图**: 项目列表页。
    *   **导航**: 点击一个项目，会**导航**到该项目的版本树视图。点击一个版本，会**导航**到该版本的编辑器视图。使用明确的返回按钮或手势进行层级返回。

#### 3. 核心视图与功能模块设计

##### 3.1. 侧边栏 (目录与项目)

*   **组件**: **树形控件 (Tree View)**，遵循 M3 的 `List` 组件风格。
*   **设计**: 文件夹和项目有清晰的层级缩进和展开/折叠图标。当前选中的项目有明显的高亮背景。
*   **交互**:
    *   侧边栏右上角或边缘提供一个明确的折叠/展开按钮（如 `menu` 或 `chevron-left` 图标）。
    *   每个项目条目右侧有一个 `...` (kebab menu) 按钮，悬停显示，点击后弹出菜单（项目设置、导出、删除）。

##### 3.2. 主画布 (版本树)

这是应用的核心交互区域，不仅用于展示，更是一个可自由导航的无限画布。

*   **版本节点卡片**:
    *   **样式**: M3 `Filled Card` 或 `Elevated Card`。
    *   **内容**: Prompt 内容摘要及元信息（时间、评分、附件指示符）。
*   **画布导航与交互**:
    *   **平移 (Panning)**:
        *   **触发**: 在画布的任意**空白区域**按下鼠标并拖动。
        *   **反馈**: 鼠标光标应变为“抓手”或“移动”图标。
        *   **功能**: 允许用户自由拖动整个版本树，以查看屏幕范围外的内容，特别适用于大型、宽阔的分支结构。
    *   **缩放 (Zooming)**:
        *   **触发**:
            *   桌面端: 按住 `Ctrl` 键并滚动**鼠标滚轮**。
            *   触控设备 (触摸板/屏幕): 使用**双指捏合/分离**手势。
        *   **功能**: 允许用户放大以聚焦版本细节，或缩小以获得整个项目版本树的宏观概览。缩放应以鼠标指针或手势中心为焦点。
    *   **节点交互**:
        *   **单击选中 (Selected/Active)**:
            1.  卡片边框或背景使用主色调高亮。
            2.  **在卡片下方或上方，平滑地展开一行操作按钮**（使用 M3 的 `Segmented Button` 或一组 `Icon Button`），包含：“**删除**”、“**+ 创建子版本**”等核心操作。
            3.  右侧面板加载并显示该版本的详细信息。
    *   **辅助工具**: 画布角落应提供一个小的控制面板，包含：
        *   放大/缩小按钮 (`+` / `-`)。
        *   一个“**重置视图/适应屏幕**”按钮，让迷失的用户可以一键恢复默认的缩放和位置。

##### 3.3. 右侧面板 (版本详情预览)

这是一个垂直布局的复合视图，分为上下两个主要区域。

*   **顶部区域: 文本编辑器**
    *   **组件**: CodeMirror 编辑器，配置 M3 风格主题。
    *   **功能**: 用户可在此直接编辑所选版本的 Prompt 文本。
    *   **操作栏**: 编辑器上方有一个紧凑的工具栏，包含：
        *   **保存按钮组**: 默认保存按钮（创建新版本）；一个下拉菜单或切换按钮，用于触发“原地保存”（仅叶子节点可用）。
        *   **片段库 (Snippets)** 触发按钮。
        *   **版本对比** 触发按钮。
*   **底部区域: 附件管理**
    *   **组件**: 卡片式网格布局 (`Grid`) 或列表 (`List`)。
    *   **内容**: 如果版本没有附件，则显示一个**文件上传区**（可点击或拖拽的虚线框）。如果已有附件，则以缩略图卡片的形式展示。
    *   **交互**: 附件缩略图可点击预览或删除。始终保留一个“添加附件”的按钮或区域。

##### 3.4. 版本对比

*   **触发方式**: 在右侧面板的编辑器工具栏中，点击“对比”按钮。
*   **展现形式**: 弹出一个**全屏或接近全屏的模态框 (Modal)**。
    *   **Rationale**: 对比是一个专注度要求很高的任务，使用模态框可以屏蔽其他元素的干扰，为 Diff 视图提供最大的可视空间。
*   **设计**: 模态框内部是 CodeMirror 的并排（Side-by-Side）Diff 视图，清晰高亮差异。用户可以在此模态框中选择要对比的另一个版本。

##### 3.5. 原子组件设计要求

*   **按钮 (Button)**: 遵循 M3 规范，使用 `Filled`, `Outlined`, `Text`, `Icon` 等不同类型的按钮以区分操作的主次。
*   **模态框 (Modal / Dialog)**: 用于需要用户确认的关键操作（如删除）、设置、数据导入导出、版本对比等。
*   **其他**: 所有组件如搜索输入、文件上传、图片预览等，均需遵循 M3 的设计规范和交互模式。

#### 4. 交互与动效

*   **核心交互流程**:
    1.  用户在左侧栏选择一个**项目**。
    2.  中间画布渲染该项目的**版本树**。
    3.  用户在版本树中**单击**一个版本节点。
    4.  **动画效果**: 被点击的节点出现高亮，并平滑展开下方的操作按钮栏；右侧面板内容**淡入/切换**为该版本的详情。
*   **微交互**: 所有可交互元素都应有 M3 标志性的**涟漪 (Ripple)** 反馈。视图切换、模态框弹出、侧边栏折叠等都应有流畅的过渡动画。

#### 5. 可访问性 (Accessibility)

*   **色彩对比度**: 严格使用 M3 动态色彩生成的 `On-*` 颜色，确保文本和背景的对比度符合 **WCAG 2.1 AA** 标准。
*   **键盘导航**: 确保所有可交互元素（按钮、输入框、列表项、版本卡片）都可以通过键盘（Tab, Enter, Space, Arrow Keys）进行访问和操作。
*   **屏幕阅读器**: 为图标按钮等非文本元素提供明确的 `aria-label`。
*   **画布可访问性**:
    *   确保画布的缩放可以通过键盘快捷键（如 `Ctrl +` 和 `Ctrl -`）控制。
    *   提供明确的“重置视图”按钮，帮助用户恢复画布状态。